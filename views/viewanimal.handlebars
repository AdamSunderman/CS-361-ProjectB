<link rel="stylesheet" type= "text/css" href="/stylesheets/viewanimal.css"/>

<div id="mainContainer">
<div id="photo"></div>	
<div id="description"></div>
<div id="city"></div>
<div id="state"></div>
<div id="address"></div>
<div id="status"></div>
<div>
<input type="submit" name="helpSubmit" id="helpSubmit" textContent = "Help">
<input type="submit" name="hostSubmit" id="hostSubmit" textContent = "Host">
<input type="submit" name="adoptSubmit" id="adoptSubmit" textContent = "Adopt">
</div>
</div>

<script type = "text/javascript">

function getParameterByName(name, url) {
    if (!url) {
      url = window.location.href;
    }
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

window.addEventListener("onload", function(){
	//document.getElementById('photo').textContent = getParameterByName('photo');
	document.getElementById('description').innerText = getParameterByName('description');
	document.getElementById('city').innerText = getParameterByName('city');
	document.getElementById('state').innerText = getParameterByName('animalState');
	document.getElementById('address').innerText = getParameterByName('address');
	document.getElementById('status').innerText = getParameterByName('status');
});



document.getElementById('helpSubmit').addEventListener('click', function(event){
	var req = new XMLHttpRequest();
	var payload = {};
	payload.animalReq = document.getElementById('animalsToView').value;
	req.open('POST', '/populateAnimals', true);
	req.setRequestHeader('Content-Type', 'application/json');
	req.addEventListener('load',function(){
		if(req.status >= 200 && req.status < 400){

			console.log("The response text: ");
			console.log(req.responseText);
			var resData = JSON.parse(req.response);
			console.log(resData);
		}	
		else{
			console.log("Error in network request: " + req.statusText);
		}
	});

	req.send(JSON.stringify(payload));
	event.preventDefault();
	event.stopPropagation();
});


document.getElementById('hostSubmit').addEventListener('click', function(event){
	var req = new XMLHttpRequest();
	var payload = {};
	payload.animalReq = document.getElementById('animalsToView').value;
	req.open('POST', '/populateAnimals', true);
	req.setRequestHeader('Content-Type', 'application/json');
	req.addEventListener('load',function(){
		if(req.status >= 200 && req.status < 400){
			console.log("The response text: ");
			console.log(req.responseText);
			var resData = JSON.parse(req.response);
			console.log(resData);
			//addRow(newElement);
			document.getElementById("animalList").style.visibility = "visible";
		}	
		else{
			console.log("Error in network request: " + req.statusText);
		}
	});

	req.send(JSON.stringify(payload));
	event.preventDefault();
	event.stopPropagation();
});

document.getElementById('adoptSubmit').addEventListener('click', function(event){
	var req = new XMLHttpRequest();
	var payload = {};
	payload.animalReq = document.getElementById('animalsToView').value;
	req.open('POST', '/populateAnimals', true);
	req.setRequestHeader('Content-Type', 'application/json');
	req.addEventListener('load',function(){
		if(req.status >= 200 && req.status < 400){
			console.log("The response text: ");
			console.log(req.responseText);
			var resData = JSON.parse(req.response);
			console.log(resData);
			//addRow(newElement);
			document.getElementById("animalList").style.visibility = "visible";
		}	
		else{
			console.log("Error in network request: " + req.statusText);
		}
	});
	req.send(JSON.stringify(payload));
	event.preventDefault();
	event.stopPropagation();
});

</script>